# 产品需求文档（PRD）

## 一、背景与目标

CalorieBurn 是一款专注于健康管理领域的移动应用，融合了三种主流减重理念：热量差（包括盈余与亏空）、碳循环饮食、间歇性断食，旨在帮助用户高效管理体重与代谢健康。研究表明，间歇性断食（Intermittent Fasting）和碳循环（Carb Cycling）是提高代谢、辅助减脂、降低心血管疾病风险的有效策略。碳循环饮食指在特定周期内交替进行低碳和高碳摄入，以在需要时最大化碳水的利用效果。而减脂的核心原则则是确保摄入热量小于消耗热量，即维持合理的热量差（例如每日亏空约 500 大卡，一周可减重约 1 磅）。本应用的目标是将这三者有机整合，提供数字化的辅助工具，帮助用户科学规划与坚持饮食和断食计划，从而实现健康减重与代谢优化。

## 二、目标用户

* **减脂塑形人群**：希望减重、降低体脂、同时保留肌肉量的用户，注重热量与营养摄入分配，需要精细管理工具。
* **健康生活追求者**：关注健康，愿意尝试断食、碳循环等新型饮食法的用户，可能非专业健身人群，但希望通过 App 获得指导与反馈。
* **有减重需求的个体**：如久坐办公室的上班族、产后恢复身材者等，需要简单直观的工具来辅助养成良好饮食习惯并跟踪进度。
* **数据驱动型用户**：喜欢通过数据和图表了解健康状况的用户，希望查看断食时长、热量差、体重变化等详细趋势，便于策略调整。

## 三、使用场景

* **每日断食管理**：用户设定 16:8 的断食计划后，每天通过 App 启动断食计时器，第二天通过APP 结束断食计时器，App 自动记录断食时长与目标对比。
* **饮食记录与碳循环提示**：根据设定的低碳/高碳日计划，App 判断今日是否为低碳日并提示目标（如：“今日为低碳日，碳水摄入请控制在 50g 以下”），用户每餐后记录所摄入食物的热量与碳水估算，用户勾选今日是否完成高碳/低碳目标。
* **热量差监控**：每日晚上查看热量差数据：摄入 2000 kcal，运动消耗 300 kcal，基础代谢 1800 kcal，日热量差 = 摄入 - 消耗 = +200 kcal（热量盈余），若连续几日为正值，App 提醒用户调整饮食或增加活动，若连续几日为负值，App表扬用户以鼓励坚持。
* **每周复盘调整**：周末打开数据页查看本周断食执行情况（平均时长）、碳循环执行率、每日平均热量差、体重变化趋势，结合数据调整下周计划。
* **个人信息管理**：注册后进入“我的”页面，填写或更新身高、体重、目标体重、断食窗口、碳循环方案等信息，系统根据此信息计算基础代谢 BMR、估算热量差并推荐方案。

## 四、核心功能

* **断食跟踪**：支持用户自定义断食计划（如 16:8、17:7等），提供断食计时器、自动计算时长，并支持历史记录查询。
* **碳循环管理**：设定每周低碳/高碳饮食方案（如 5 低 + 2 高），日历标记每日日型，提醒碳水摄入目标并跟踪执行情况。
* **热量差计算与反馈**：记录每日摄入热量与消耗热量（摄入通过饮食记录，消耗含基础代谢与运动），实时计算日热量差并以可视方式反馈（正为盈余，负为亏空）。
* **数据记录与同步**：支持记录体重、饮食、运动消耗等数据，所有数据云端同步，支持多设备一致性。
* **数据可视化**：提供折线图/柱状图等方式展示体重变化、断食时长、热量差与碳水趋势，便于用户了解阶段状态。
* **目标与提醒**：用户可设置体重目标与阶段性目标（如月减 2kg），系统根据执行情况推送提醒与激励（如断食完成提醒、未记录饮食提示等）。
* **多语言支持**：系统语言默认为英文，支持多语言设置，支持切换为中文、韩文、日文等。

## 五、信息架构与页面设计

采用底部 Tab 栏结构，主要包含“今日”、“记录”、“数据”、“我的”四大主页面，同时配合弹窗与二级页面进行记录输入与计划设置。

### 1. “今日”主页

应用默认主页，汇总显示用户当日关键数据状态：

* 顶部显示 **目标概览**：“今日体重”、“目标体重”、“已减重”
* 懂爱计算 **热量差汇总**：“摄入 1800 / 消耗 2300，热量差 -500（亏空）”、“今日目标热量差”，上述数据根据用户当天录入的饮食摄入、运动消耗、以及设置中的基础代谢得出。
* 实时显示 **断食计时器**：若正在断食则显示计时 + 距目标倒计时，若在进食窗口，则显示距上一轮断食结束时长。
* **碳循环提示**：今日为低碳日或高碳日，并显示推荐摄入目标（如：低碳日<50g），支持用户选择是否完成目标。
* **运动提示**：今日为无氧日/有氧日，支持用户选择是否完成计划。
* 底部提供快捷操作按钮：“+ 添加饮食记录”、“+ 开始/结束断食”、“+ 运动记录”、“+体重记录”等。

### 2. “记录”主页

分为4个记录类型tab，支持增/删/改/查每条记录：

* **体重**：上部分显示概览数据 “最新体重”、“目标体重”、“已减重”，下部分显示每日体重记录，单天有多次体重录入时，取最新的显示
* **轻断食**：上部分显示概览数据 “达成断食目标天数”，下部分显示每日轻断食记录，单天有多次轻断食记录时，取最长的显示
* **饮食**：上部分显示概览数据 “达成热量差目标天数”、“达成碳循环目标天数”，下部分显示每日饮食记录，单天有多次饮食记录时，按天聚合显示，且单天的记录中显示是否达成碳循环目标、热量差目标
* **运动**：上部分显示概览数据 “运动天数”、“达成有/无氧计划天数”，下部分显示每日运动记录，单天有多次运动记录时，按天聚合显示，且单天的记录中显示是否达成有氧/无氧计划

### 3. “数据”页

展示历史数据与趋势图：

* **断食图表**：柱状图，展示近几日断食时长及目标值，叠加体重曲线。
* **热量差图表**：展示每日热量差（正/负值）及目标值，叠加体重曲线。
* **其他图表（拓展）**：如碳水摄入趋势、高/低碳执行率等，初版聚焦断食+热量差+体重三者关联。
* 提供日期切换、图表视图切换等过滤控件。

### 4. “我的”页

个人中心，管理用户信息与账户：

* 显示头像（可选）、绑定手机号、昵称、身高、当前体重、出生年月日、性别等。
* 展示当前计划概况（断食方案、碳循环方案、目标体重等）。
* 提供信息修改入口：修改身高体重、断食碳循环方案等。
* App 设置项：版本信息、隐私协议、语言切换等。

### 5. 记录与计划配置页面

* **饮食记录添加/编辑页**：表单页，记录时间、食物描述、摄入热量（kcal）、碳水（g），可拓展记录蛋白质/脂肪。
* **开始/结束断食页**：支持快捷按钮开启或结束，结束时弹窗确认，必要时支持手动补录。
* **碳循环计划设置页**：自定义每周高碳日安排。
* **有氧/无氧训练设置页**：自定义每周无氧日安排。
* **目标设置页**：设置目标体重、BMI，或周减重目标，系统计算所需热量差并在数据页展示进度。

## 六、数据结构设计

主要数据实体：

* **User**：基本信息与偏好。

  * 字段示例：`user_id`，手机号，昵称，生日，性别，身高，当前体重，目标体重，断食方案，碳循环方案，语言。

* **FastingRecord**：记录每次断食的开始/结束时间与持续时长。

* **MealRecord**：记录每餐或每日饮食摄入（热量、碳水等）。

* **ActivityRecord**：记录运动消耗（手动输入或集成穿戴设备）。

* **WeightRecord**：记录体重变化，支持趋势分析。

* **Plan & Goal**：当前计划模板与目标设置，可嵌入 User 表或单独设表。

* **Notification Log（可选）**：记录提醒发送历史。

采用关系型数据库（含外键）或 NoSQL 文档存储均可。需考虑 `user_id + date` 等索引优化查询，支持云端同步，多端数据一致。

## 七、边界情况与业务逻辑

* **未正常结束断食**：超时提醒、自动结束、支持手动调整记录。
* **记录重叠**：防止断食记录重叠、饮食记录时间重复，校验冲突。
* **跨日处理**：将断食记录归属起始日，图表可展示跨天跨度。
* **无数据情况**：新用户或遗漏记录时图表提示“暂无数据”，不显示为 0。
* **异常数据输入**：前端限制合理范围，后端校验离群值并提示。
* **多设备同步冲突**：按时间戳合并记录并提示用户处理冲突。
* **隐私安全**：手机号与健康数据需加密存储与传输，删除账号时清除用户数据。

## 八、图表与可视化

* **断食时长趋势图**：柱状图展示每日实际 vs 目标，颜色区分是否达标，可叠加体重曲线。
* **热量差趋势图**：上下柱状图表示盈余（红）与亏空（蓝），叠加体重曲线。
* **其他图表**：如每周碳循环执行情况、营养比例饼图等，后续版本迭代加入。
* **交互功能**：支持点击查看详细数值、长按滑动查看趋势、日期格式本地化。
* **报告导出（未来功能）**：图表生成 PDF 或图片，用于保存或分享。

图表组件使用专业库（详见技术栈），风格统一、动画顺滑，通过可视化强化用户理解并提升使用粘性。
